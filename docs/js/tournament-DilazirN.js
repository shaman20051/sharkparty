import{r as v,o as S,w as B,e as $,c as l,f as b,a as s,b as t,t as o,F as c,g as m,n as h,h as k,i as w,j as P,v as T,k as x,d as D}from"./script-_nmGqW4k.js";const L={key:0,class:"tournament"},N={class:"tournament__title"},E={class:"tournament__info"},I={class:"tournament__info-label"},M={class:"tournament__info-value"},A={class:"tournament__tabs"},F={class:"tournament__tabs-header"},R={class:"tournament__tabs-content"},H={key:0,class:"tournament__tab tournament__tab--active"},O={class:"tournament__data"},q={class:"tournament__data-key"},G={class:"tournament__data-value"},J={key:1,class:"tournament__tab tournament__tab--active"},K={class:"tournament__prizes-table"},Q={class:"tournament__table-col"},V={class:"tournament__table-col"},W={key:2,class:"tournament__tab tournament__tab--active"},X={class:"tournament__blinds-table"},Y={class:"tournament__table-col"},Z={class:"tournament__table-col"},tt={class:"tournament__table-col"},et={class:"tournament__table-col"},nt={class:"tournament__table-col"},at={key:3,class:"tournament__tab tournament__tab--active"},st={class:"tournament__filters",style:{"margin-bottom":"1rem",display:"flex",gap:"1rem","align-items":"center"}},ot=["value"],lt={class:"tournament__players-table"},rt={class:"tournament__table-col"},it={class:"tournament__table-col"},_t={class:"tournament__player"},ut=["src","alt"],dt={class:"tournament__player-name"},ct={class:"tournament__table-col"},mt={class:"tournament__table-col"},vt={class:"pagination"},pt=["onClick"],bt={__name:"Tournament",props:{tournament:Object},setup(y){const g=y,i=v({}),a=v("info"),r=v({}),u=v("all"),d=v(10),p=v(1);S(async()=>{}),B(()=>g.tournament,_=>{_&&(i.value=_,r.value={Старт:new Date(_.startTime).toLocaleString("ru-RU"),Гарантия:`$${_.info.prizePool.toLocaleString()}`,"Бай-ин":`$${_.info.buyIn}`,Статус:_.status.trim(),Длительность:_.duration})},{immediate:!0});const C=$(()=>{var n;const _=new Set((n=i.value.players)==null?void 0:n.map(e=>e.player.country.toUpperCase()));return Array.from(_||[])}),z=$(()=>i.value.players?u.value==="all"?i.value.players:i.value.players.filter(_=>_.player.country.toUpperCase()===u.value):[]),U=$(()=>{const _=(p.value-1)*d.value;return z.value.slice(_,_+d.value)}),j=$(()=>Math.ceil(z.value.length/d.value));return(_,n)=>i.value.info?(s(),l("section",L,[t("div",{class:"tournaments-grid__cell tournaments-grid__cell--details",onClick:n[0]||(n[0]=e=>_.$emit("close"))},n[7]||(n[7]=[t("a",{href:"#",class:"tournaments-grid__details-link"},"Список турниров",-1)])),t("h1",N,'Турнир "'+o(i.value.info.name)+'"',1),t("div",E,[(s(!0),l(c,null,m(r.value,(e,f)=>(s(),l("div",{class:"tournament__info-item",key:f},[t("span",I,o(f)+":",1),t("span",M,o(e),1)]))),128))]),t("div",A,[t("div",F,[t("button",{class:h(["tournament__tab-btn",{"tournament__tab-btn--active":a.value==="info"}]),onClick:n[1]||(n[1]=e=>a.value="info")},"Инфо",2),t("button",{class:h(["tournament__tab-btn",{"tournament__tab-btn--active":a.value==="prizes"}]),onClick:n[2]||(n[2]=e=>a.value="prizes")},"Призы",2),t("button",{class:h(["tournament__tab-btn",{"tournament__tab-btn--active":a.value==="blinds"}]),onClick:n[3]||(n[3]=e=>a.value="blinds")},"Блайнды",2),t("button",{class:h(["tournament__tab-btn",{"tournament__tab-btn--active":a.value==="players"}]),onClick:n[4]||(n[4]=e=>a.value="players")},"Игроки",2)]),t("div",R,[a.value==="info"?(s(),l("div",H,[t("div",O,[(s(!0),l(c,null,m(i.value.info,(e,f)=>(s(),l("div",{class:"tournament__data-row",key:f},[t("div",q,o(f),1),t("div",G,o(e),1)]))),128))])])):b("",!0),a.value==="prizes"?(s(),l("div",J,[t("div",K,[n[8]||(n[8]=t("div",{class:"tournament__table-row tournament__table-row--header"},[t("div",{class:"tournament__table-col"},"Место"),t("div",{class:"tournament__table-col"},"Приз ($)")],-1)),(s(!0),l(c,null,m(i.value.prize,e=>(s(),l("div",{class:"tournament__table-row",key:e.place},[t("div",Q,o(e.place),1),t("div",V,o(e.prize.toFixed(2)),1)]))),128))])])):b("",!0),a.value==="blinds"?(s(),l("div",W,[t("div",X,[n[9]||(n[9]=k('<div class="tournament__table-row tournament__table-row--header"><div class="tournament__table-col">Уровень</div><div class="tournament__table-col">Блайнды</div><div class="tournament__table-col">Анте</div><div class="tournament__table-col">Время (мин)</div><div class="tournament__table-col">Тайм-банк</div></div>',1)),(s(!0),l(c,null,m(i.value.blinds,e=>(s(),l("div",{class:"tournament__table-row",key:e.level},[t("div",Y,o(e.level),1),t("div",Z,o(e.blind),1),t("div",tt,o(e.ante),1),t("div",et,o(e.mins),1),t("div",nt,o(e.timebank),1)]))),128))])])):b("",!0),a.value==="players"?(s(),l("div",at,[t("div",st,[t("label",null,[n[11]||(n[11]=w(" Страна: ")),P(t("select",{"onUpdate:modelValue":n[5]||(n[5]=e=>u.value=e)},[n[10]||(n[10]=t("option",{value:"all"},"Все",-1)),(s(!0),l(c,null,m(C.value,e=>(s(),l("option",{key:e,value:e},o(e),9,ot))),128))],512),[[T,u.value]])]),t("label",null,[n[13]||(n[13]=w(" Игроков на странице: ")),P(t("select",{"onUpdate:modelValue":n[6]||(n[6]=e=>d.value=e)},n[12]||(n[12]=[t("option",{value:10},"10",-1),t("option",{value:20},"20",-1),t("option",{value:50},"50",-1)]),512),[[T,d.value]])])]),t("div",lt,[n[14]||(n[14]=k('<div class="tournament__table-row tournament__table-row--header"><div class="tournament__table-col">Место</div><div class="tournament__table-col">Игрок</div><div class="tournament__table-col">Страна</div><div class="tournament__table-col">Результат</div></div>',1)),(s(!0),l(c,null,m(U.value,e=>(s(),l("div",{class:"tournament__table-row",key:e.rank},[t("div",rt,o(e.rank),1),t("div",it,[t("div",_t,[t("img",{src:e.player.avatar,alt:e.player.nickname,class:"tournament__player-avatar"},null,8,ut),t("span",dt,o(e.player.nickname),1)])]),t("div",ct,o(e.player.country.toUpperCase()),1),t("div",mt,o(e.chips),1)]))),128))]),t("div",vt,[(s(!0),l(c,null,m(j.value,e=>(s(),l("button",{key:e,onClick:f=>p.value=e,class:h(["pagination__link",{"pagination__link--active":p.value===e}])},o(e),11,pt))),128))])])):b("",!0)])])])):b("",!0)}},gt={class:"tournaments-section"},ft={class:"tournaments-list"},ht={class:"tournaments-grid"},kt={class:"tournaments-grid__cell tournaments-grid__cell--date"},yt={class:"tournaments-grid__cell tournaments-grid__cell--name"},$t={class:"tournaments-grid__cell tournaments-grid__cell--prize"},wt={class:"tournaments-grid__cell tournaments-grid__cell--buyin"},Ct={class:"tournaments-grid__cell tournaments-grid__cell--prize-structure"},zt={class:"tournaments-grid__prize-value tournaments-grid__prize-value--green"},Pt={class:"tournaments-grid__cell tournaments-grid__cell--details"},Tt=["onClick"],xt={__name:"TournamentList",props:{tournaments:Array},setup(y){const g=i=>new Date(i).toLocaleString("ru-RU");return(i,a)=>(s(),l("div",null,[a[6]||(a[6]=t("h2",null,"Список турниров ЛИДЕРБОРДА",-1)),t("section",gt,[a[5]||(a[5]=k('<div class="tournaments-filters"><form class="tournaments-filters__form"><span class="tournaments-filters__label">Фильтровать по:</span><select class="tournaments-filters__select" name="status" aria-label="Статус турнира"><option value="all" selected>Все турниры</option><option value="finished">Законченные</option><option value="upcoming">Запланированные</option></select><select class="tournaments-filters__select" name="sort" aria-label="Сортировка"><option value="newest" selected>Сначала новые</option><option value="oldest">Сначала старые</option><option value="popular">По популярности</option><option value="leaderboards">По лидербордам</option></select><button type="submit" class="tournaments-filters__button" aria-label="Применить фильтры"><span class="tournaments-filters__button-text">Применить</span><svg class="tournaments-filters__button-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" width="20" height="20" aria-hidden="true"><path d="M4.25 5.61C6.27 8.2 10 13 10 13v6c0 .55.45 1 1 1h2c.55 0 1-.45 1-1v-6s3.72-4.8 5.74-7.39c.51-.66.04-1.61-.79-1.61H5.04c-.83 0-1.3.95-.79 1.61z"></path></svg></button></form></div>',1)),t("div",ft,[a[3]||(a[3]=t("h2",{class:"tournaments-list__title"},"Турниры лидерборда",-1)),t("div",ht,[a[2]||(a[2]=k('<div class="tournaments-grid__header tournaments-grid__row"><div class="tournaments-grid__cell tournaments-grid__cell--date">Дата</div><div class="tournaments-grid__cell tournaments-grid__cell--name">Турнир</div><div class="tournaments-grid__cell tournaments-grid__cell--prize">Гарантия ($)</div><div class="tournaments-grid__cell tournaments-grid__cell--buyin">Бай-ин ($)</div><div class="tournaments-grid__cell tournaments-grid__cell--prize-structure">Призовые ($/вход/реентри)</div><div class="tournaments-grid__cell tournaments-grid__cell--leaderboard">Лидерборд</div><div class="tournaments-grid__cell tournaments-grid__cell--details"></div></div>',1)),(s(!0),l(c,null,m(y.tournaments,r=>(s(),l("div",{class:"tournaments-grid__row",key:r.startTime},[t("div",kt,o(g(r.startTime)),1),t("div",yt,o(r.tournamentName),1),t("div",$t,"$"+o(r.info.prizePool),1),t("div",wt,"$"+o(r.info.buyIn),1),t("div",Ct,[t("span",zt,[w(" $"+o(r.info.buyIn*r.info.registered+r.info.reEntry*r.info.reEntered)+" ",1),a[0]||(a[0]=t("br",null,null,-1)),w(" "+o(r.info.registered)+"/"+o(r.info.reEntered),1)])]),a[1]||(a[1]=t("div",{class:"tournaments-grid__cell tournaments-grid__cell--leaderboard"},[t("a",{href:"#",class:"tournaments-grid__leaderboard-link"},"Ежедневный")],-1)),t("div",Pt,[t("a",{href:"#",class:"tournaments-grid__details-link",onClick:u=>i.$emit("select",r)},"Подробнее",8,Tt)])]))),128))]),a[4]||(a[4]=k('<div class="pagination"><a href="#" class="pagination__link" aria-label="Предыдущая страница">«</a><a href="#" class="pagination__link">1</a><a href="#" class="pagination__link pagination__link--active">2</a><a href="#" class="pagination__link">3</a><a href="#" class="pagination__link">4</a><a href="#" class="pagination__link" aria-label="Следующая страница">»</a></div>',1))])])]))}},St={class:"tournament-page"},Ut={class:"tournament-page__left"},jt={class:"tournament-page__right"},Bt={__name:"TournamentPage",setup(y){const g=v([]),i=v(null),a=r=>{i.value=r};return S(async()=>{const r="/sharkparty/",u=await fetch(`${r}/data/index_tournament.json`).then(p=>p.json()),d=await Promise.all(u.map(p=>fetch(`${r}/data/${p}`).then(C=>C.json())));g.value=d}),(r,u)=>(s(),l("div",St,[t("div",Ut,[i.value?b("",!0):(s(),x(xt,{key:0,onSelect:a,tournaments:g.value},null,8,["tournaments"]))]),t("div",jt,[i.value?(s(),x(bt,{key:0,tournament:i.value,onClose:u[0]||(u[0]=d=>i.value=null)},null,8,["tournament"])):b("",!0)])]))}};D(Bt).mount("#tournament-app");
